@using System.ComponentModel.DataAnnotations

@inherits InputState
@inject IStringLocalizer<Resources> L

@code
{
    protected override RenderFragment Content =>
        @<StateContainer Title="@(L["Components.States.Common.SetupPlayer"])">
            <MudForm @bind-IsValid="this.IsValid">
                <MudTextField
                    T="string"
                    Label="@(L["Components.States.PlayerName.InputPlaceholder"])"
                    Required="true"
                    Validation="@(new RegularExpressionAttribute(@"^[a-z0-9\-\.]{3,32}$")
                    {
                        ErrorMessage = L["Components.States.PlayerName.ErrorMessage"]
                    })"
                    @bind-Value="this.Name"
                    Immediate="true"
                    Class="mb-3" />
                @for (int i = 0; i < this.words.Length; i++)
                {
                    var id = i;
                    <MudTextField
                        T="string"
                        Label="@(L[$"Components.States.PlayerWords.Word.{id}"])"
                        Required="true"
                        RequiredError="@(L["Common.Error.Required"])"
                        Validation="@(new MinLengthAttribute(2)
                        {
                            ErrorMessage = L["Components.States.PlayerWords.MinLengthError"]
                        })"
                        @bind-Value="this.words[id]"
                        Immediate="true"
                        Class="mb-3" />
                }
                <MudButton
                    Variant="Variant.Filled"
                    Color="Color.Primary"
                    FullWidth="true"
                    Size="Size.Large"
                    Disabled="!this.IsValid"
                    @onclick="this.SetupPlayer">
                    @L["Components.States.PlayerName.SubmitButton"]
                </MudButton>
            </MudForm>
        </StateContainer>;
}