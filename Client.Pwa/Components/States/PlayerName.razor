@using System.ComponentModel.DataAnnotations

@inherits InputState<PlayerName>
@inject IStringLocalizer<Resources> L

<StepContainer
    Title="@(L["Components.States.Common.SetupPlayer"])"
    Subtitle="@(L["Components.States.PlayerName.Title"])"
    TotalSteps="2" Step="1">
    <MudForm @ref="this.form" IsValidChanged="_ => this.StateHasChanged()">
        <MudTextField
            T="string"
            Label="@(L["Components.States.PlayerName.InputPlaceholder"])"
            Required="true"
            Validation="@(new RegularExpressionAttribute(@"^[a-z0-9\-\.]{3,32}$")
            {
                ErrorMessage = L["Components.States.PlayerName.ErrorMessage"]
            })"
            @bind-Value="this.playerName"
            Immediate="true"
            Class="my-10" />
        <MudButton
            Variant="Variant.Filled"
            Color="Color.Primary"
            FullWidth="true"
            Size="Size.Large"
            Disabled="!this.form!.IsValid"
            @onclick="_ => this.Submit(() => this.OnPlayerNameSet(this.playerName))">
            @L["Components.States.PlayerName.SubmitButton"]
        </MudButton>
    </MudForm>
</StepContainer>