@using Fishbowl.Net.Shared.Data

<h2>Set player data</h2>

<form @onsubmit="this.SubmitAsync" @onsubmit:preventDefault>
    <div>
        <input type="text" @bind="this.playerName" minlength="3" required>
    </div>

    @for (int i = 0; i < this.words.Length; i++)
    {
        var id = i;
        <div>
            <label for="word-@id">Word @id</label><input type="text" @bind="this.words[id]" id="word-@id">
        </div>
    }
    <button type="submit">Set</button>
</form>

@code
{
    [Parameter]
    public EventCallback<Player> OnPlayerDataSet { get; set; } = default!;

    private string playerName = string.Empty;

    private string[] words = new string[2];

    private Task SubmitAsync(EventArgs e) =>
        this.OnPlayerDataSet.InvokeAsync(new Player(
            Guid.NewGuid(),
            this.playerName,
            this.words.Select(word => new Word(Guid.NewGuid(), word))));
}