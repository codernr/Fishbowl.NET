@using System.ComponentModel.DataAnnotations

@inherits State
@inject IStringLocalizer<Resources> L

@code
{
    protected override RenderFragment Content =>
        @<StateContainer Title="@(L["Components.States.UsernamePassword.Title"])">
            <MudForm IsValidChanged="_ => this.Update()" @ref="this.form">
                <MudGrid>
                    <MudItem xs="12">
                        <MudTextField
                            T="string"
                            Label="@(L["Components.States.PlayerName.InputPlaceholder"])"
                            Required="true"
                            Validation="@(new RegularExpressionAttribute(@"^[a-z0-9\-\.]{3,32}$")
                            {
                                ErrorMessage = L["Components.States.PlayerName.ErrorMessage"]
                            })"
                            @bind-Value="this.Username"
                            Immediate="true"
                            Class="mb-5" />
                    </MudItem>
                    <MudItem xs="12">
                        <MudTextField
                            T="string"
                            Label="@(L["Components.States.UsernamePassword.InputPlaceholder"])"
                            Required="true"
                            RequiredError="@L["Common.Error.Required"]"
                            Validation="@(new RegularExpressionAttribute(@"^[a-z0-9\-\.]{3,32}$")
                                {
                                    ErrorMessage = L["Components.States.UsernamePassword.ErrorMessage"]
                                })"
                            @bind-Value="this.password"
                            Immediate="true"
                            Class="mb-10" />
                    </MudItem>
                    <MudItem xs="6">
                        <MudButton
                            Variant="Variant.Filled"
                            Color="Color.Warning"
                            Size="Size.Large"
                            FullWidth="true"
                            Disabled="!this.form!.IsValid"
                            @onclick="_ => this.OnCreateGame.InvokeAsync((this.Username, this.password))">
                            @L["Components.States.UsernamePassword.CreateButton"]
                        </MudButton>
                    </MudItem>
                    <MudItem xs="6">
                        <MudButton
                            Variant="Variant.Filled"
                            Color="Color.Success"
                            Size="Size.Large"
                            FullWidth="true"
                            Disabled="!this.form!.IsValid"
                            @onclick="_ => this.OnJoinGame.InvokeAsync((this.Username, this.password))">
                            @L["Components.States.UsernamePassword.JoinButton"]
                        </MudButton>
                    </MudItem>
                </MudGrid>
            </MudForm>
        </StateContainer>;
}