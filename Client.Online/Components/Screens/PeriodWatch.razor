@inherits Screen
@inject IState<PeriodState> PeriodState
@inject IState<GamePlayState> GamePlayState

<ScreenContainer>
    <MudContainer>
        <MudText Typo="Typo.h5">
            @L["Components.States.PeriodWatch.Playing"]: @this.PeriodState.Value.Running.Player.Username
        </MudText>
    </MudContainer>

    <MudContainer Class="my-10">
        <Timer Start="this.Period.StartedAt" Length="this.Period.Length" OnExpired="_ => this.expired = true" />
    </MudContainer>

    @if (this.GamePlayState.Value.Team.Players.Any(p => p.Username == this.PeriodState.Value.Running.Player.Username))
    {
        <MudContainer>
            @if(!this.PeriodState.Value.Expired)
            {
                <MudAlert Severity="Severity.Info">
                    @L["Components.States.PeriodWatch.YourTurn"]
                </MudAlert>
            }   
            else
            {
                <MudAlert Severity="Severity.Warning">
                    @L["Components.States.PeriodWatch.Expired"]
                </MudAlert>
            }    
        </MudContainer>
    }
</ScreenContainer>